<script>
    var players = [];
    var attempts = 0;
    var maxAttempts = 10;

    function onYouTubeIframeAPIReady() {
        players.push(new YT.Player('player1', {
            events: {
                'onReady': onPlayerReady,
                'onStateChange': onPlayerStateChange
            }
        }));
        // ... repeat for player2, player3, player4 ...
    }

    function onPlayerReady(event) {
        event.target.setPlaybackQuality('small');
        event.target.mute(); // 先靜音以允許自動播放
        event.target.playVideo();
    }

    function onPlayerStateChange(event) {
        if (event.data == YT.PlayerState.PLAYING) {
            trySetVolume(event.target);
        }
    }

    function trySetVolume(player) {
        if (attempts >= maxAttempts) return;
        
        try {
            player.unMute(); // 取消靜音
            player.setVolume(1); // 設置最小音量
            console.log('Volume set successfully');
        } catch (error) {
            console.log('Failed to set volume, retrying...');
            attempts++;
            setTimeout(() => trySetVolume(player), 1000);
        }
    }
</script>
